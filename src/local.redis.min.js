(function(e){"use strict";if(!e.localStorage){Object.defineProperty(e,"localStorage",new function(){var t=[],n={};Object.defineProperty(n,"getItem",{value:function(e){return e?this[e]:null},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(n,"key",{value:function(e){return t[e]},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(n,"setItem",{value:function(t,n){if(!t)return;document.cookie=e.escape(t)+"="+e.escape(n)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),Object.defineProperty(n,"removeItem",{value:function(t){if(!t)return;document.cookie=e.escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},writable:!1,configurable:!1,enumerable:!1}),this.get=function(){var r;for(var i in n)r=t.indexOf(i),r===-1?n.setItem(i,n[i]):t.splice(r,1),delete n[i];for(t;t.length>0;t.splice(0,1))n.removeItem(t[0]);for(var s,o,u=0,a=document.cookie.split(/\s*;\s*/);u<a.length;u++)s=a[u].split(/\s*=\s*/),s.length>1&&(n[o=e.unescape(s[0])]=e.unescape(s[1]),t.push(o));return n},this.configurable=!1,this.enumerable=!0});return}var t={parse:e.JSON&&(e.JSON.parse||e.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()},stringify:Object.toJSON||e.JSON&&(e.JSON.stringify||e.JSON.encode)};if(!t.parse||!t.stringify)throw new Error("No JSON support found");var n=e.localStorage||{},r={setItem:function(e,t){n.setItem(e,t)},getItem:function(e){return n.getItem(e)},key:function(e){return n.key(e)},clear:function(){n.clear()},removeItem:function(e){n.removeItem(e)}};e.localRedis=r;var i={errors:["wrong number of arguments","non-string value","value is not an integer or out of range","not a string value","timestamp already passed","delay not convertible to a number","source and destination objects are the same","no such key","missing storage context"],generateError:function(e){var t,n,r=arguments[1],i=arguments[2];if(typeof e!="number"||r&&typeof r!="string")throw new TypeError("wrong arg types");return n=this.errors[e],i?(i=i.toLowerCase(),i==="typeerror"&&(t=new TypeError(n))):t=new Error(n),t}},s=function(e){var n=":",r="e";return e=m(e)?e:t.stringify(e),r+n+e},o=function(e,n){return t.stringify({c:n,d:e})},u=function(e){var n=s(e),i=r.getItem(n);return t.parse(i)},a=function(e){var t=u(e);return t&&t.d?t.d:null},f=function(e){var t=u(e);return t&&t.c?t.c:null},l=function(e){var t=u(e),n;return t&&t.d&&t.c&&(n=t.c+t.d-(new Date).getTime()),n},c=function(e,t,n){var i=s(e),u=o(t,n);r.setItem(i,u)},h=function(e){var t=s(e),n=u(e);r.removeItem(t)},p=function(e){var t=s(e);return!!r.getItem(t)},d=function(e){var t=l(e),n=t<0;return n},v=function(e){d(e)&&(r._remove(e),r._remove(s(e)))},m=function(e){return typeof e=="string"},g=function(e){return m(e)?e:t.stringify(e)};r._hasExpiration=p,r._store=function(e,t){e=g(e),t=g(t);try{this.setItem(e,t)}catch(n){throw n}},r._retrieve=function(e){e=g(e),v(e);var n=this.getItem(e);try{n=t.parse(n)}catch(r){}finally{return n}},r._remove=function(e){e=g(e),this.removeItem(e)},r._exists=function(e){v(e);var t=!0,r,i;if(e instanceof Array)for(r=0,i=e.length;r<i;r++)n.hasOwnProperty(e[r])||(t=!1);else t=!!n.hasOwnProperty(e);return t},r.del=function(e){var t=0,n,r;e=e instanceof Array?e:arguments;for(n=0,r=e.length;n<r;n++)this._exists(e[n])&&(h(e[n]),this._remove(e[n]),++t);return t},r.exists=function(e){if(arguments.length>1)throw new i.generateError(0);return this._exists(e)?1:0},r.rename=function(e,t){if(arguments.length!==2)throw new i.generateError(0);if(e===t)throw new i.generateError(6);if(!this._exists(e))throw new i.generateError(7);p(t)&&h(t);var n=this._retrieve(e);this._store(t,n);if(p(e)){var r=l(e);this.pexpire(t,r),h(e)}this._remove(e)},r.renamenx=function(e,t){if(arguments.length!==2)throw new i.generateError(0);if(e===t)throw new i.generateError(6);if(!this._exists(e))throw new i.generateError(7);return this._exists(t)?0:(this.rename(e,t),1)},r.getkey=function(e){if(arguments.length>2)throw new i.generateError(0);var t,r,s,o,u=[],a;a=!!arguments[1];for(t=0,r=n.length;t<r;t++){s=this.key(t),o=this.getItem(s);if(e===o){u.push(s);if(!a)break}}return u.length===1?u=u[0]:u.length||(u=null),u},r.expire=function(e,t){if(arguments.length!==2)throw new i.generateError(0);if(!this._exists(e))return 0;var n=s(e);t=parseFloat(t,10);if(!t)throw new i.generateError(5);return t*=1e3,p(e)&&h(e),c(e,t,(new Date).getTime()),1},r.pexpire=function(e,t){if(arguments.length!==2)throw i.generateError(0);t=parseFloat(t,10);if(!t)throw i.generateError(5);return this.expire(e,t/1e3)},r.expireat=function(e,t){if(arguments.length!==2)throw i.generateError(0);var n=(new Date).getTime()/1e3,r=t-n;if(r<0)throw i.generateError(4);return this.expire(e,r)},r.pexpireat=function(e,t){if(arguments.length!==2)throw i.generateError(0);var n=t-(new Date).getTime();if(n<0)throw i.generateError(4);return this.pexpire(e,n)},r.persist=function(e){if(arguments.length!==1)throw i.generateError(0);return!this._exists(e)||!p(e)?0:(this._remove(s(e)),1)},r.ttl=function(e){if(arguments.length!==1)throw i.generateError(0);return!this._exists(e)||!p(e)?-1:l(e,this)/1e3},r.pttl=function(e){if(arguments.length!==1)throw i.generateError(0);return this.ttl(e)*1e3},r.randomkey=function(){var e=Object.keys(n),t=n.length,r=Math.floor(Math.random()*t);return t?e[r]:null},r.keys=function(e){var t=new RegExp(e),r,i,s=[],o=Object.keys(n);for(r=0,i=o.length;r<i;r++)t.test(o[r])&&s.push(o[r]);return s},r.get=function(e){return this._retrieve(e)},r.set=function(e,t){var n=p(e),r;try{this._store(e,t),n&&(r=a(e),this.persist(e))}catch(i){throw i}return this},r.getset=function(e,t){if(arguments.length!==2)throw i.generateError(0);var n=this._retrieve(e);if(!m(n)&&n!==null)throw i.generateError(1);return this.set(e,t),n},r.mget=function(e){var t=[],n,r;e=e instanceof Array?e:arguments;for(n=0,r=e.length;n<r;n++)t[t.length]=this._retrieve(e[n]);return t},r.mset=function(e){var t=e instanceof Array,n=e instanceof Object,r,i,s;if(n&&!t){s=Object.keys(e);for(r=0,i=s.length;r<i;r++)this._store(s[r],e[s[r]])}else{e=t?e:arguments;for(r=0,i=e.length;r<i;r+=2)this._store(e[r],e[r+1])}return this},r.setnx=function(e,t){if(arguments.length!==2)throw i.generateError(0);return this._exists(e)?0:(this._store(e,t),1)},r.msetnx=function(e){var t=e instanceof Array,n=e instanceof Object,r,i,s=[];if(n&&!t)s=Object.keys(e);else{e=t?e:arguments;for(r=0,i=e.length;r<i;r+=2)s.push(e[r])}for(r=0,i=s.length;r<i;r++)if(this._exists(s[r]))return 0;for(r=0,i=e.length;r<i;r+=2)this._store(e[r],e[r+1]);return 1},r.incr=function(e){if(arguments.length!==1)throw i.generateError(0);var t=this._retrieve(e),r=typeof e,s=typeof t,o=parseInt(t,10),u=isNaN(o),a=s==="number",f=m(s)&&!u,l=m(s)&&u,c=!1;!u&&t>=Number.MAX_VALUE&&(c=!0);if(!a&&l||c||u&&n.hasOwnProperty(e))throw i.generateError(2);a||f?t=o+1:t=1,this._store(e,t)},r.incrby=function(e,t){if(arguments.length!==2)throw i.generateError(0);var n=this._retrieve(e),r=typeof n,s=typeof t,o=parseInt(n,10),u=parseInt(t,10),a=isNaN(u),f=isNaN(o),l=r==="number",c=s==="number",h=m(r)&&!f,p=m(r)&&f,d=m(s)&&!a,v=m(s)&&a,g=!1;if(!f&&n>=Number.MAX_VALUE||!a&&t>=Number.MAX_VALUE)g=!0;if(!l&&p||f&&this._exists(e)||a||!c&&v||g)throw i.generateError(2);if((l||h)&&(c||d))n=o+u;else if(c||d)n=u;this._store(e,n)},r.mincr=function(e){var t,n;e=e instanceof Array?e:arguments;for(t=0,n=e.length;t<n;t++)this.incr(e[t])},r.mincrby=function(e){var t,n,r;if(e instanceof Array||m(e)){e=e instanceof Array?e:arguments;if((e.length&1)!==0)throw i.generateError(0);for(t=0,n=e.length;t<n;t+=2)this.incrby(e[t],e[t+1])}else if(e instanceof Object)for(r in e)this.incrby(r,e[r])},r.append=function(e,t){var n=this._exists(e)?this._retrieve(e):"",r=m(n);return r&&(n+=t,this._store(e,n)),r?n.length:1},r.strlen=function(e){var t=this._retrieve(e);if(!t)return 0;if(m(t))return t.length;throw i.generateError(1)},r.setex=function(e,t,n){if(arguments.length!==3)throw i.generateError(0);this._store(e,t),this.expire(e,n)},r.psetex=function(e,t,n){if(arguments.length!==3)throw i.generateError(0);this._store(e,t),this.pexpire(e,n)}})(window);