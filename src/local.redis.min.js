(function(e,t,n){"use strict";if(!e.localStorage){Object.defineProperty(e,"localStorage",new function(){var n=[],r={};Object.defineProperty(r,"getItem",{value:function(e){return e?this[e]:null},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(r,"key",{value:function(e){return n[e]},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(r,"setItem",{value:function(n,r){if(!n)return;t.cookie=e.escape(n)+"="+e.escape(r)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(r,"length",{get:function(){return n.length},configurable:!1,enumerable:!1}),Object.defineProperty(r,"removeItem",{value:function(n){if(!n)return;t.cookie=e.escape(n)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},writable:!1,configurable:!1,enumerable:!1}),this.get=function(){var i;for(var s in r)i=n.indexOf(s),i===-1?r.setItem(s,r[s]):n.splice(i,1),delete r[s];for(n;n.length>0;n.splice(0,1))r.removeItem(n[0]);for(var o,u,a=0,f=t.cookie.split(/\s*;\s*/);a<f.length;a++)o=f[a].split(/\s*=\s*/),o.length>1&&(r[u=e.unescape(o[0])]=e.unescape(o[1]),n.push(u));return r},this.configurable=!1,this.enumerable=!0});return}var r={parse:e.JSON&&(e.JSON.parse||e.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()},stringify:Object.toJSON||e.JSON&&(e.JSON.stringify||e.JSON.encode)};if(!r.parse||!r.stringify)throw new Error("No JSON support found");var i,s=function(t){if(t!==e.localStorage&&t!==e.sessionStorage)throw new Error("unsupported storage context");i=t},o=s.prototype;e.localRedis=new s(e.localStorage);var u=function(e){return typeof e=="string"},a=function(e){return typeof e=="number"},f=function(e){return u(e)?e:r.stringify(e)},l="storagechange",c=function(n,r){var i,s=e.$||e.jQuery;if(t.createEventObject)return i=t.createEventObject(),n.fireEvent("on"+r,i);if(!s)return i=t.createEvent("HTMLEvents"),i.initEvent(r,!0,!0),!n.dispatchEvent(i);s(n).trigger(r)},h=function(){return c(t,"storagechange")},p=["wrong number of arguments","non-string value","value is not an integer or out of range","not a string value","timestamp already passed","delay not convertible to a number","source and destination objects are the same","no such key","missing storage context"],d=function(e){var t,n,r=arguments[1],i=arguments[2];if(typeof e!="number"||r&&typeof r!="string")throw new TypeError("wrong arg types");return n=p[e],i?(i=i.toLowerCase(),i==="typeerror"&&(t=new TypeError(n))):t=new Error(n),t},v=function(e){var t=":",n="e";return e=f(e),n+t+e},m=function(e,t){return r.stringify({c:t,d:e})},g=function(e){var t=v(e),n=i.getItem(t);return r.parse(n)},y=function(e){var t=g(e);return t&&t.d?t.d:null},b=function(e){var t=g(e);return t&&t.c?t.c:null},w=function(e){var t=g(e),n;return t&&t.d&&t.c&&(n=t.c+t.d-(new Date).getTime()),n},E=function(e,t,n){var r=v(e),s=m(t,n);i.setItem(r,s)},S=function(e){var t=v(e),n=g(e);i.removeItem(t)},x=function(e){var t=v(e);return!!i.getItem(t)},T=function(e){var t=w(e),n=t<0;return n},N=function(e){T(e)&&(L(e),L(v(e)))};o.setItem=function(e,t){i.setItem(e,t),h()},o.getItem=function(e){return N(e),i.getItem(e)},o.key=function(e){return i.key(e)},o.clear=function(){i.clear(),h()},o.removeItem=function(e){i.removeItem(e),h()};var C=function(e,t){e=f(e),t=f(t);try{i.setItem(e,t),h()}catch(n){throw n}},k=function(e){e=f(e),N(e);var t=i.getItem(e);try{t=r.parse(t)}catch(n){}finally{return t}},L=function(e){e=f(e),i.removeItem(e)},A=function(e){N(e);var t=!0,n,r;if(e instanceof Array)for(n=0,r=e.length;n<r;n++)i.hasOwnProperty(e[n])||(t=!1);else t=!!i.hasOwnProperty(e);return t};o.del=function(e){var t=0,n,r;e=e instanceof Array?e:arguments;for(n=0,r=e.length;n<r;n++)A(e[n])&&(S(e[n]),L(e[n]),++t);return t},o.exists=function(e){if(arguments.length>1)throw d(0);return A(e)?1:0},o.rename=function(e,t){var r,i;arguments.length!==2?r=0:e===t?r=6:A(e)||(r=7);if(r!==n)throw d(r);x(t)&&S(t),C(t,k(e)),x(e)&&(i=w(e),this.pexpire(t,i),S(e)),L(e)},o.renamenx=function(e,t){var n;arguments.length!==2?n=0:e===t?n=6:A(e)||(n=7);if(n)throw d(n);return A(t)?0:(this.rename(e,t),1)},o.getkey=function(e){if(arguments.length>2)throw d(0);var t,n,r,s,o=[],u;u=!!arguments[1];for(t=0,n=i.length;t<n;t++){r=i.key(t),s=i.getItem(r);if(e===s){o.push(r);if(!u)break}}return o.length===1?o=o[0]:o.length||(o=null),o},o.expire=function(e,t){if(arguments.length!==2)throw d(0);if(!A(e))return 0;t=parseFloat(t,10);if(!t)throw d(5);return t*=1e3,x(e)&&S(e),E(e,t,(new Date).getTime()),1},o.expires=function(e){return e=f(e),x(e)?1:0},o.pexpire=function(e,t){if(arguments.length!==2)throw d(0);t=parseFloat(t,10);if(!t)throw d(5);return this.expire(e,t/1e3)},o.expireat=function(e,t){if(arguments.length!==2)throw d(0);var n=(new Date).getTime()/1e3,r=t-n;if(r<0)throw d(4);return this.expire(e,r)},o.pexpireat=function(e,t){if(arguments.length!==2)throw d(0);var n=t-(new Date).getTime();if(n<0)throw d(4);return this.pexpire(e,n)},o.persist=function(e){if(arguments.length!==1)throw d(0);return!A(e)||!x(e)?0:(L(v(e)),1)},o.ttl=function(e){if(arguments.length!==1)throw d(0);return!A(e)||!x(e)?-1:w(e)/1e3},o.pttl=function(e){if(arguments.length!==1)throw d(0);return this.ttl(e)*1e3},o.randomkey=function(){var e=Object.keys(i),t=i.length,n=Math.floor(Math.random()*t);return t?e[n]:null},o.keys=function(e){var t=new RegExp(e),n,r,s=[],o=Object.keys(i);for(n=0,r=o.length;n<r;n++)t.test(o[n])&&s.push(o[n]);return s.length?s:null},o.get=function(e){return k(e)},o.set=function(e,t){var n=x(e),r;try{C(e,t),n&&(r=y(e),this.persist(e))}catch(i){throw i}return this},o.getset=function(e,t){if(arguments.length!==2)throw d(0);var n=k(e);if(!u(n)&&n!==null)throw d(1);return this.set(e,t),n},o.mget=function(e){var t=[],n,r;e=e instanceof Array?e:arguments;for(n=0,r=e.length;n<r;n++)t[t.length]=k(e[n]);return t},o.mset=function(e){var t=e instanceof Array,n=e instanceof Object,r,i,s;if(n&&!t){s=Object.keys(e);for(r=0,i=s.length;r<i;r++)C(s[r],e[s[r]])}else{e=t?e:arguments;for(r=0,i=e.length;r<i;r+=2)C(e[r],e[r+1])}return this},o.setnx=function(e,t){if(arguments.length!==2)throw d(0);return A(e)?0:(C(e,t),1)},o.msetnx=function(e){var t=e instanceof Array,n=e instanceof Object,r,i,s=[];if(n&&!t)s=Object.keys(e);else{e=t?e:arguments;for(r=0,i=e.length;r<i;r+=2)s.push(e[r])}for(r=0,i=s.length;r<i;r++)if(A(s[r]))return 0;for(r=0,i=e.length;r<i;r+=2)C(e[r],e[r+1]);return 1},o.incr=function(e){if(arguments.length!==1)throw d(0);this.incrby(e,1)},o.incrby=function(e,t){if(arguments.length!==2)throw d(0);var n=k(e),r=typeof n,i=typeof t,s=parseInt(n,10),o=parseInt(t,10),f=isNaN(o),l=isNaN(s),c=n===null,h=a(r),p=u(r)&&!l,v=u(r)&&l,m=!h&&v,g=l&&A(e),y=a(i),b=u(i)&&!f,w=u(i)&&f,E=!y&&w,S=!l&&n>=Number.MAX_VALUE,x=!f&&t>=Number.MAX_VALUE,T=S||x;if(m&&!c||g||f||E||T)throw d(2);if((h||p)&&(y||b))n=s+o;else if(y||b)n=o;C(e,n)},o.mincr=function(e){var t,n;e=e instanceof Array?e:arguments;for(t=0,n=e.length;t<n;t++)this.incr(e[t])},o.mincrby=function(e){var t,n,r;if(e instanceof Array||u(e)){e=e instanceof Array?e:arguments;if((e.length&1)!==0)throw d(0);for(t=0,n=e.length;t<n;t+=2)this.incrby(e[t],e[t+1])}else if(e instanceof Object)for(r in e)this.incrby(r,e[r])},o.append=function(e,t){if(arguments.length!==2)throw d(0);var n=k(e)||"",r=u(n);return r&&(n+=t,C(e,n)),r?n.length:1},o.strlen=function(e){var t=k(e);if(!t)return 0;if(!u(t))throw d(1);return t.length},o.setex=function(e,t,n){if(arguments.length!==3)throw d(0);C(e,t),this.expire(e,n)},o.psetex=function(e,t,n){if(arguments.length!==3)throw d(0);C(e,t),this.pexpire(e,n)}})(window,document);